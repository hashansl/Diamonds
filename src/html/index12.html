<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Jewel's Diamonds</title>

    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />

    <!-- Compiled and minified CSS -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.0/jquery.min.js"></script>

    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <script src="../js/index.js"></script>

    <script>
      // const names = ['Ashan', 'Roshan', 'John', 'Sanath','Michal','Rose'];
      // var D = google.script.run.withSuccessHandler(A).getUserData();

      // var ARRAY1 = [];
      var names = [];
      for(i=0;i<33;i++){
        names.push(i+1);
      }

      function algorithmToWin(names){

        var l = names.length;
        console.log(l);
        var numberOfClusters=0;
        if (l<=15){
          numberOfClusters=1;
        }
        else{
          for(i=5;0;i--){
            if(l<=16+Math.pow(2,4+i)){

              numberOfClusters=Math.pow(2,i+1);
              break;


            }
            else{
              return false;
            }
          }
        }

        console.log(numberOfClusters);
        
      }


      function A(i){
          if(i=0){
            return 15;
          }
          else{
            return A(i-1)+ Math.pow(2,i+2);
          }


        }

      var n = 5;
      var DA =[]
      for(i=0;n;i++){
        
        var s = A(i);
        DA.push(s);

      }





      // console.log(D);
      window.onload = function(){
        document.getElementById("main").style.display = "block";
        document.getElementById('form1').style.display = 'none';
        document.getElementById("winnerdetails").style.display = "none";
        document.getElementById("myCanvas").style.display = "none";
        console.log(DA);
        
      };

      function formShow() {
        document.getElementById('form1').style.display = 'none';
      }
      function onClickMain(){
        document.getElementById('form1').style.display = 'none';
        document.getElementById("winnerdetails").style.display = "none";
        document.getElementById("myCanvas").style.display = "none";
        document.getElementById("main").style.display = "block";



      }
      function onClickDonate(){
        document.getElementById('form1').style.display = 'block';
        document.getElementById("winnerdetails").style.display = "none";
        document.getElementById("myCanvas").style.display = "none";
        document.getElementById("main").style.display = "none";



      }

      // const arrpush  = (array) =>{

      //   array.forEach((e)=>{

      //     ARRAY1.push(e);
      //   }
      // }
      function onClickSarahsseed(){

        // google.script.run.withSuccessHandler(arrpush).getUserData();
        // console.log("Run");
        // console.log(D);

        algorithmToWin(names);



        document.getElementById('form1').style.display = 'none';
        document.getElementById("winnerdetails").style.display = "block";
        document.getElementById("myCanvas").style.display = "block";
        document.getElementById("main").style.display = "none";

        drawOnCanvas();
      }
      function onClickJewelsPickaxes(){
        document.getElementById('form1').style.display = 'none';
        document.getElementById("winnerdetails").style.display = "none";
        document.getElementById("myCanvas").style.display = "none";
        document.getElementById("main").style.display = "none";

      }
      function onClickJewelsDiamonds(){
        document.getElementById('form1').style.display = 'none';
        document.getElementById("winnerdetails").style.display = "none";
        document.getElementById("myCanvas").style.display = "none";
        document.getElementById("main").style.display = "none";

      }
      function onClickSarahFlowers(){
        document.getElementById('form1').style.display = 'none';
        document.getElementById("winnerdetails").style.display = "none";
        document.getElementById("myCanvas").style.display = "none";
        document.getElementById("main").style.display = "none";

      }

      function drawOnCanvas() {
        const myCanvas = $('#myCanvas');
        const ctx = myCanvas[0].getContext('2d');
        const image = document.getElementById('myImage2');
        myCanvas.width = image.naturalWidth;
        myCanvas.height = image.naturalHeight;
        ctx.drawImage(image, 0, 0);
        //Box1
        ctx.font = "16px Dishonorable Mention";
        ctx.textAlign = "center";
        ctx.fillText(names[0], 202, 56);
        //Box2
        ctx.textAlign = "center";
        ctx.fillText(names[1], 653, 56);
        //Box3
        ctx.textAlign = "center";
        ctx.fillText(names[2], 855, 56);
        //Box4
        ctx.textAlign = "center";
        ctx.fillText(names[3],185 ,343 );
        //Box5
        ctx.textAlign = "center";
        ctx.fillText(names[4],528,211);
        //Box6
        ctx.textAlign = "center";
        ctx.fillText(names[5],891,345);
        //Box7
        ctx.textAlign = "center";
        ctx.fillText(names[0],114,632);
        //Box8
        ctx.textAlign = "center";
        ctx.fillText(names[0],539,504);
        //Box9
        ctx.textAlign = "center";
        ctx.fillText(names[0],955,445);
        //Box10
        ctx.textAlign = "center";
        ctx.fillText(names[0],185,930);
        //Box11
        ctx.textAlign = "center";
        ctx.fillText(names[0],535,886);
        //Box12
        ctx.textAlign = "center";
        ctx.fillText(names[0],889,930 );
        //Box13
        ctx.textAlign = "center";
        ctx.fillText(names[0],236,1037);
        //Box14
        ctx.textAlign = "center";
        ctx.fillText(names[0], 668,1037);
        //Box16
        ctx.textAlign = "center";
        ctx.fillText(names[0],867,1037);

      }

      $(document).ready(function(){
        $('select').formSelect(); 
      });


    </script>
  </head>

  <body>
    <div>
    <nav class="nav-extended">
      <div class="nav-wrapper">
        <a href="#" class="brand-logo">Sarah's Flowers & Jewel's Diamonds</a>
        <a href="#" data-target="mobile-demo" class="sidenav-trigger"
          ><i class="material-icons">menu</i></a
        >
        <ul id="nav-mobile" class="right hide-on-med-and-down">
          <li><a onclick="onClickDonate()">Donate</a></li>
          <li><a href="collapsible.html">Logout</a></li>
        </ul>
      </div>
      <div class="nav-content">
        <ul class="tabs tabs-transparent">
          <li class="tab" onclick="onClickMain()"><a >Main</a></li>
          <li class="tab" onclick="onClickSarahsseed()"><a class="active" href="#test1">SARAH'S SEEDS</a></li>
          <li class="tab" onclick="onClickJewelsPickaxes()"><a href="#test2">JEWEL'S PICKAXES</a></li>
          <li class="tab" onclick='onClickJewelsDiamonds()'><a href="#test3">JEWEL'S DIAMONDS</a></li>
          <li class="tab" onclick='onClickSarahFlowers()'><a href="#test3">SARAH'S FLOWERS</a></li>
        </ul>
      </div>
    </nav>
    

    <ul class="sidenav" id="mobile-demo">
      <li><a onclick="onClickDonate()">Donate</a></li>
      <li><a href="collapsible.html">Logout</a></li>
    </ul>

    <!-- <div id="test1" class="col s12">Test 1</div>
    <div id="test2" class="col s12">Test 2</div>
    <div id="test3" class="col s12">Test 3</div>
    <div id="test4" class="col s12">Test 4</div> -->
    <div class="container">
      <div class="col">
        <div class="row" >

        </div>
        <div class="row" id='winnerdetails'>
          <h6>GEM ID: A1</h6>
          <h6>WINNER: John</h6>

          <canvas id="myCanvas" 
          class="materialboxed"
          width=1080
          height=1080
          ></canvas>

          <ul class="pagination">
            <li class="disabled">
              <a href="#!"><i class="material-icons">chevron_left</i></a>
            </li>
            <li class="active"><a href="#!">1</a></li>
            <li class="waves-effect"><a href="#!">2</a></li>
            <li class="waves-effect"><a href="#!">3</a></li>
            <li class="waves-effect"><a href="#!">4</a></li>
            <li class="waves-effect"><a href="#!">5</a></li>
            <li class="waves-effect">
              <a href="#!"><i class="material-icons">chevron_right</i></a>
            </li>
          </ul>
        </div>

        <div class="row" id="main">
          <h4>Sarah's Jewels Automated Member Update In Real-Time</h4>
          <br/>
          <ul style="list-style-type:disc;">
            <li><h5>Sarah's Seeds</h5></li>
              <ul>
                <li><h6>Where Members Sow Seeds For Harvest</h6></li>
              </ul>
            <li><h5>Jewel's Pickaxes</h5></li>
              <ul>
                <li><h6> Where Members gain tools For Diamond Mining</h6></li>
              </ul>
            <li><h5>Jewel's Diamond</h5></li>
              <ul>
                <li><h6>Where Members Mine For Diamonds</h6></li>
              </ul>
            <li><h5>Sarah's Flowers</h5></li>
              <ul>
                <li><h6>Where Members Reap All That Was Sowed</h6></li>
              </ul>
          </ul>

        </div>

        <div class="row" id="form1">
          <form class="col s12">

            <div class="row">
              <div class="input-field col s12">
                <i class="material-icons prefix">account_circle</i>
                <input placeholder="Enter Diamond Name" id="diamondName" type="text" class="validate">
                <label for="diamondName">Diamond Name</label>
              </div>
            </div>
            <div class="row">
              <div class="input-field col s12">
                <i class="material-icons prefix">smartphone</i>
                <input id="phoneNumber" type="tel" class="validate">
                <label for="phoneNimber">Phone Number</label>
              </div>
            </div>
            <div class="row">
              <div class="input-field col s12">
                <i class="material-icons prefix">email</i>
                <input id="email" type="email" class="validate">
                <label for="email">Email</label>
              </div>
            </div>

            <div class="row">
              <div class="input-field col s12">
                <select id = "paymentType">
                  <option value="" disabled selected>Choose your option</option>
                  <option value="Cash App">Cash App</option>
                  <option value="Bitcoin">Bitcoin</option>
                  <option value="Other">Other</option>
                </select>
                <label>Select Your Payment Option</label>
              </div>
            </div>

            <div class="row">
              <button id="butttonn" class="btn waves-effect waves-light" type="submit" name="action">Submit
                  <i class="material-icons right">send</i>
              </button>
            </div>
            
            </div>
          </form>
        </div>



      </div>
    </div>
    <img 
    id="myImage" 
    src="https://drive.google.com/uc?export=download&id=1T91etovwthJF5bXSK1onXcxPfllMh9PK" 
    style="display: none;" ; 
    />

    <img 
    id="myImage2" 
    src="https://drive.google.com/uc?export=download&id=1TPkQMBDGar6NM_5Nx7eadfeGoIH9v5GX" 
    style="display: none;" ; 
    />
  </body>

  <script>

    document.getElementById("butttonn").addEventListener("click",afterButtonClicked);

    function afterButtonClicked(){
        var diamondName = document.getElementById('diamondName').value;
        var phoneNumber = document.getElementById('phoneNumber').value;
        var emailAddress = document.getElementById('email').value;
        var paymentType = document.getElementById('paymentType').value;


        var rawData = {diamondName: diamondName,phoneNumber:phoneNumber,emailAddress:emailAddress,paymentType:paymentType}
        alert('You just submitted '+JSON.stringify(rawData))

        google.script.run.formSubmit(rawData);
        document.getElementById('diamondName').value='';
        document.getElementById('phoneNumber').value='';
        document.getElementById('email').value='';

    }

  </script>
</html>
